(this["webpackJsonpcanvas-worktable"]=this["webpackJsonpcanvas-worktable"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t,n){e.exports=n.p+"static/media/dotmenu.bbc00c0c.svg"},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(5),i=n.n(o),r=(n(13),n(2)),c=n(3),l=n(7),v=n(6),h=(n(14),n(1)),u=function(){function e(t){var a=this;Object(r.a)(this,e),this.svgSources={dotmenu:n(23)},this.cacheSvg={},this.eventTypes={ZOOM:"zoom",DRAGPANSTART:"dragPanStart",DRAGPANEND:"dragPanEnd"},this.pLeft=t.parentNode.offsetLeft,this.pTop=t.parentNode.offsetTop,t.width=this.viewWidth=t.parentNode.offsetWidth,t.height=this.viewHeight=t.parentNode.offsetHeight,this.canvas=new h.fabric.Canvas(t),this.canvas.selection=!1,this.LISTAREA=[50,50,700,700],this.CARDSIZE=[180,180],this.events={},this.injectCss(),this.loadSvgs((function(){a.initGlobalEvents(),a.createSomething(),a.createCtxMenu()}))}return Object(c.a)(e,[{key:"loadSvgs",value:function(e){var t=this,n=Object.keys(this.svgSources),a=0;n.forEach((function(s){h.fabric.loadSVGFromURL(t.svgSources[s],(function(o,i){t.cacheSvg[s]=h.fabric.util.groupSVGElements(o,i),t.cacheSvg[s].scale(.02),++a===n.length&&e&&e()}))}))}},{key:"injectCss",value:function(){var e=document.createElement("style"),t="\n            .ctx-menu{\n                position: absolute;\n                width: 100px;\n                background-color: #f5f5f5;\n                border-radius: 4px;\n                visibility: hidden;\n                overflow: hidden;\n                box-shadow: 1px 4px 10px rgba(0,0,0,.2);\n            }\n            .ctx-menu span{\n                display: flex;\n                align-items: center;\n                padding: 0 10px;\n                height: 35px;\n                cursor: pointer;\n                color: #444;\n            }\n            .ctx-menu span:hover{\n                background-color: #eee;\n            }\n        ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e)}},{key:"addCard",value:function(e,t){var n=this,a="-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol",s=new h.fabric.Rect({top:0,left:0,width:this.CARDSIZE[0],height:this.CARDSIZE[1],rx:4,ry:4,fill:e.color,shadow:{color:"rgba(0,0,0,.2)",offsetX:1,offsetY:10,blur:10}}),o=new h.fabric.Textbox(e.text,{left:10,top:35,width:this.CARDSIZE[0]-10,fontSize:16,fill:"#333",fontFamily:a,splitByGrapheme:!0}),i=new h.fabric.Textbox(e.num,{left:10,top:10,width:20,fontSize:14,fontFamily:a,fill:"rgba(0,0,0,.7)",splitByGrapheme:!0}),r=new h.fabric.Group([s,o,i],{_cardId:"1243",top:this.LISTAREA[1],left:this.LISTAREA[0]+(this.CARDSIZE[0]+20)*t,width:this.CARDSIZE[0],height:this.CARDSIZE[1],subTargetCheck:!0,hasControls:!1,hasBorders:!1});this.cacheSvg.dotmenu.clone((function(e){e.set({left:10,top:8,originX:"left",originY:"top"});var t=new h.fabric.Rect({top:0,left:0,width:35,height:20,originX:"left",originY:"top",rx:4,ry:4,fill:"rgba(0,0,0,0)"}),a=new h.fabric.Group([t,e],{top:-n.CARDSIZE[1]/2,left:n.CARDSIZE[0]-35-n.CARDSIZE[0]/2,width:35,height:20,subTargetCheck:!0,hasControls:!1,hasBorders:!1});a.on("mouseover",(function(e){e.target.getObjects()[0].set("fill","rgba(0,0,0,.1)"),this.canvas.hoverCursor="pointer",this.canvas.renderAll()})),a.on("mouseout",(function(e){e.target.getObjects()[0].set("fill","rgba(0,0,0,0)"),this.canvas.hoverCursor="default",this.canvas.renderAll()})),r.add(a)})),this.canvas.add(r)}},{key:"createSomething",value:function(){var e=this;[{color:"#FF9E4A",num:"1",text:"\u516c\u53f8\u673a\u5bc6\u6587\u4ef6\u5bb9\u6613\u8f7b\u6613\u6cc4\u9732\uff0c\u7f3a\u4e4f\u76d1\u7ba1"},{color:"#B486BC",num:"2",text:"\u65f6\u95f4\u53d8\u5f97\u7410\u788e\u4e0d\u96c6\u4e2d"},{color:"#F16F81",num:"3",text:"\u8fd9\u662f\u4e00\u4e2a\u795e\u5947\u7684\u5361\u7247\n\u5b83\u53ef\u4ee5\u8868\u8fbe\u5927\u5bb6\u7684\u60f3\u6cd5"}].forEach((function(t,n){e.addCard(t,n)}))}},{key:"createCtxMenu",value:function(){var e=document.createElement("div"),t=!1;e.className="ctx-menu",e._show=!1,e.innerHTML="<span>\u83dc\u5355\u4e00</span><span>\u83dc\u5355\u4e8c</span><span>\u83dc\u5355\u4e09</span>",document.body.appendChild(e),this.ctxMenu={show:function(n,a){t=!0,e.style.left=n+"px",e.style.top=a+"px",e.style.visibility="visible"},hide:function(){t&&(t=!1,e.style.visibility="hidden")},isShow:function(){return t}}}},{key:"registerDragBoardEvent",value:function(){var e=this,t={spaceKey:!1},n={moveBoard:!1},a=1;this.canvas.on("mouse:down",(function(a){t.spaceKey&&(n.moveBoard=1,e.canvas.upperCanvasEl.classList.remove("canvas-move"),e.canvas.upperCanvasEl.classList.add("canvas-moved"),e.triggerEvent(e.eventTypes.DRAGPANSTART)),e.ctxMenu.hide()})),this.canvas.on("mouse:up",(function(a){n.moveBoard&&t.spaceKey&&(e.triggerEvent(e.eventTypes.DRAGPANEND),e.canvas.upperCanvasEl.classList.remove("canvas-move"),e.canvas.upperCanvasEl.classList.remove("canvas-moved"),n.moveBoard=0)})),this.canvas.on("mouse:move",(function(t){if(n.moveBoard&&t&&t.e){var a=new h.fabric.Point(t.e.movementX,t.e.movementY);e.canvas.relativePan(a)}})),this.canvas.on("mouse:over",(function(t){t.target&&t.target._cardId&&(t.target.getObjects()[0].set("shadow","1px 10px 10px rgba(0,0,0,.3)"),e.canvas.renderAll())})),this.canvas.on("mouse:out",(function(t){t.target&&t.target._cardId&&(t.target.getObjects()[0].set("shadow","1px 10px 10px rgba(0,0,0,.2)"),e.canvas.renderAll())})),this.canvas.wrapperEl.addEventListener("wheel",(function(t){if(t.preventDefault(),t.ctrlKey){a-=.02*t.deltaY,a=Math.min(a,10),a=Math.max(a,.2);var n=new h.fabric.Point(t.pageX-e.pLeft,t.pageY-e.pTop);e.canvas.zoomToPoint(n,a),e.triggerEvent(e.eventTypes.ZOOM,a)}}),{passive:!1,capture:!1}),this.canvas.upperCanvasEl.addEventListener("contextmenu",(function(t){for(var n,a=e.canvas.getPointer(t),s=e.canvas.getObjects(),o=s.length-1;o>=0;o--){var i=s[o];if(i.containsPoint(a)){n=i;break}}return console.log(n),e.ctxMenu.show(t.clientX,t.clientY),t.preventDefault(),!1}),!1),window.addEventListener("resize",(function(){e.viewWidth=e.canvas.wrapperEl.offsetWidth,e.viewHeight=e.canvas.wrapperEl.offsetHeight,e.canvas.setWidth(e.viewWidth),e.canvas.setHeight(e.viewHeight)}),!1),document.addEventListener("keydown",(function(n){32===n.keyCode&&(t.spaceKey=1,e.canvas.upperCanvasEl.classList.add("canvas-move"))}),!1),document.addEventListener("keyup",(function(a){32===a.keyCode&&(t.spaceKey=0,e.canvas.upperCanvasEl.classList.remove("canvas-move"),e.canvas.upperCanvasEl.classList.remove("canvas-moved"),n.moveBoard&&(e.triggerEvent(e.eventTypes.DRAGPANEND),n.moveBoard=0))}),!1)}},{key:"triggerEvent",value:function(e,t){var n=this;this.events[e]&&this.events[e].forEach((function(e){e.call(n,t)}))}},{key:"on",value:function(e,t){this.events[e]?this.events[e].push(t):this.events[e]=[t]}},{key:"initGlobalEvents",value:function(){this.registerDragBoardEvent()}}]),e}(),d=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={zoom:1,dragPan:!1},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._b=new u(this.canvas),this._b.on("zoom",(function(t){e.setState({zoom:t})})),this._b.on("dragPanStart",(function(){e.setState({dragPan:!0})})),this._b.on("dragPanEnd",(function(){e.setState({dragPan:!1})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"tools"},s.a.createElement("p",null,"1. \u6309\u4f4f\u7a7a\u683c\u952e\u62d6\u62fd\u753b\u5e03",s.a.createElement("br",null),"2. macOS\u89e6\u6478\u677f\u624b\u52bf\u7f29\u653e\u753b\u5e03",s.a.createElement("br",null),"3. windows\u7cfb\u7edf\u6309\u7740ctrl\u952e\u9f20\u6807\u6eda\u8f6e\u7f29\u653e\u753b\u5e03"),s.a.createElement("span",null,"zoom: ",parseInt(100*this.state.zoom),"%"),s.a.createElement("span",null,"canvas dragging: ",this.state.dragPan?"yes":"no")),s.a.createElement("canvas",{className:"canvas",ref:function(t){return e.canvas=t}}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.55f60857.chunk.js.map