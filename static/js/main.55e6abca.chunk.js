(this["webpackJsonpcanvas-worktable"]=this["webpackJsonpcanvas-worktable"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(24)},,,,,function(e,t,a){},function(e,t,a){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t,a){e.exports=a.p+"static/media/dotmenu.bbc00c0c.svg"},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(5),i=a.n(s),r=(a(13),a(2)),c=a(3),v=a(7),l=a(6),h=(a(14),a(1)),u=function(){function e(t){var n=this;Object(r.a)(this,e),this.svgSources={dotmenu:a(23)},this.cacheSvg={},this.eventTypes={ZOOM:"zoom",DRAGPANSTART:"dragPanStart",DRAGPANEND:"dragPanEnd"},this.pLeft=t.parentNode.offsetLeft,this.pTop=t.parentNode.offsetTop,t.width=this.viewWidth=t.parentNode.offsetWidth,t.height=this.viewHeight=t.parentNode.offsetHeight,this.canvas=new h.fabric.Canvas(t),this.canvas.selection=!1,this.LISTAREA=[50,50,700,700],this.CARDSIZE=[180,180],this.events={},this.loadSvgs((function(){n.initGlobalEvents(),n.createSomething()}))}return Object(c.a)(e,[{key:"loadSvgs",value:function(e){var t=this,a=Object.keys(this.svgSources),n=0;a.forEach((function(o){h.fabric.loadSVGFromURL(t.svgSources[o],(function(s,i){t.cacheSvg[o]=h.fabric.util.groupSVGElements(s,i),t.cacheSvg[o].scale(.02),++n===a.length&&e&&e()}))}))}},{key:"addCard",value:function(e,t){var a=this,n="-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol",o=new h.fabric.Rect({top:0,left:0,width:this.CARDSIZE[0],height:this.CARDSIZE[1],rx:4,ry:4,fill:e.color,shadow:{color:"rgba(0,0,0,.2)",offsetX:1,offsetY:10,blur:10}}),s=new h.fabric.Textbox(e.text,{left:10,top:35,width:this.CARDSIZE[0]-20,fontSize:16,fill:"#333",fontFamily:n,splitByGrapheme:!0}),i=new h.fabric.Textbox(e.num,{left:10,top:10,width:20,fontSize:14,fontFamily:n,fill:"rgba(0,0,0,.7)",splitByGrapheme:!0}),r=new h.fabric.Group([o,s,i],{_cardId:"1243",top:this.LISTAREA[1],left:this.LISTAREA[0]+(this.CARDSIZE[0]+20)*t,width:this.CARDSIZE[0],height:this.CARDSIZE[1],subTargetCheck:!0,hasControls:!1,hasBorders:!1});this.cacheSvg.dotmenu.clone((function(e){e.set({left:10,top:8,originX:"left",originY:"top"});var t=new h.fabric.Rect({top:0,left:0,width:35,height:20,originX:"left",originY:"top",rx:4,ry:4,fill:"rgba(0,0,0,0)"}),n=new h.fabric.Group([t,e],{top:-a.CARDSIZE[1]/2,left:a.CARDSIZE[0]-35-a.CARDSIZE[0]/2,width:35,height:20,subTargetCheck:!0,hasControls:!1,hasBorders:!1});n.on("mouseover",(function(e){e.target.getObjects()[0].set("fill","rgba(0,0,0,.1)"),this.canvas.hoverCursor="pointer",this.canvas.renderAll()})),n.on("mouseout",(function(e){e.target.getObjects()[0].set("fill","rgba(0,0,0,0)"),this.canvas.hoverCursor="default",this.canvas.renderAll()})),r.add(n)})),this.canvas.add(r)}},{key:"createSomething",value:function(){var e=this;[{color:"#FF9E4A",num:"1",text:"\u516c\u53f8\u673a\u5bc6\u6587\u4ef6\u5bb9\u6613\u8f7b\u6613\u6cc4\u9732\uff0c\u7f3a\u4e4f\u76d1\u7ba1"},{color:"#B486BC",num:"2",text:"\u65f6\u95f4\u53d8\u5f97\u7410\u788e\u4e0d\u96c6\u4e2d"},{color:"#F16F81",num:"3",text:"\u5728\u5bb6\u4e0a\u73ed\u6240\u4ea7\u751f\u7684\u7535\u8d39\u7f51\u8d39\u516c\u53f8\u4e0d\u627f\u62c5"}].forEach((function(t,a){e.addCard(t,a)}))}},{key:"registerDragBoardEvent",value:function(){var e=this,t={spaceKey:!1},a={moveBoard:!1},n=1;this.canvas.on("mouse:down",(function(n){t.spaceKey&&(a.moveBoard=1,e.canvas.upperCanvasEl.classList.remove("canvas-move"),e.canvas.upperCanvasEl.classList.add("canvas-moved"),e.triggerEvent(e.eventTypes.DRAGPANSTART))})),this.canvas.on("mouse:up",(function(n){a.moveBoard&&t.spaceKey&&(e.triggerEvent(e.eventTypes.DRAGPANEND),e.canvas.upperCanvasEl.classList.remove("canvas-move"),e.canvas.upperCanvasEl.classList.remove("canvas-moved"),a.moveBoard=0)})),this.canvas.on("mouse:move",(function(t){if(a.moveBoard&&t&&t.e){var n=new h.fabric.Point(t.e.movementX,t.e.movementY);e.canvas.relativePan(n)}})),this.canvas.on("mouse:over",(function(t){t.target&&t.target._cardId&&(t.target.getObjects()[0].set("shadow","1px 10px 10px rgba(0,0,0,.3)"),e.canvas.renderAll())})),this.canvas.on("mouse:out",(function(t){t.target&&t.target._cardId&&(t.target.getObjects()[0].set("shadow","1px 10px 10px rgba(0,0,0,.2)"),e.canvas.renderAll())})),this.canvas.wrapperEl.addEventListener("wheel",(function(t){if(t.preventDefault(),t.ctrlKey){n-=.02*t.deltaY,n=Math.min(n,10),n=Math.max(n,.2);var a=new h.fabric.Point(t.pageX-e.pLeft,t.pageY-e.pTop);e.canvas.zoomToPoint(a,n),e.triggerEvent(e.eventTypes.ZOOM,n)}}),{passive:!1,capture:!1}),document.addEventListener("keydown",(function(a){32===a.keyCode&&(t.spaceKey=1,e.canvas.upperCanvasEl.classList.add("canvas-move"))}),!1),document.addEventListener("keyup",(function(n){32===n.keyCode&&(t.spaceKey=0,e.canvas.upperCanvasEl.classList.remove("canvas-move"),e.canvas.upperCanvasEl.classList.remove("canvas-moved"),a.moveBoard&&(e.triggerEvent(e.eventTypes.DRAGPANEND),a.moveBoard=0))}),!1)}},{key:"triggerEvent",value:function(e,t){var a=this;this.events[e]&&this.events[e].forEach((function(e){e.call(a,t)}))}},{key:"on",value:function(e,t){this.events[e]?this.events[e].push(t):this.events[e]=[t]}},{key:"initGlobalEvents",value:function(){this.registerDragBoardEvent()}}]),e}(),f=function(e){Object(v.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={zoom:1,dragPan:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._b=new u(this.canvas),this._b.on("zoom",(function(t){e.setState({zoom:t})})),this._b.on("dragPanStart",(function(){e.setState({dragPan:!0})})),this._b.on("dragPanEnd",(function(){e.setState({dragPan:!1})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"tools"},o.a.createElement("p",null,"1. \u6309\u4f4f\u7a7a\u683c\u952e\u62d6\u62fd\u753b\u5e03",o.a.createElement("br",null),"2. macOS\u89e6\u6478\u677f\u624b\u52bf\u7f29\u653e\u753b\u5e03"),o.a.createElement("span",null,"zoom: ",parseInt(100*this.state.zoom),"%"),o.a.createElement("span",null,"canvas dragging: ",this.state.dragPan?"yes":"no")),o.a.createElement("canvas",{className:"canvas",ref:function(t){return e.canvas=t}}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.55e6abca.chunk.js.map